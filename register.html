<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Cadastro • Vexyl</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
  <div class="card">
    <h2>Criar conta</h2>
    <input id="nome" placeholder="Nome real"><br><br>
    <input id="nomePublico" placeholder="Nome público"><br><br>
    <input id="telefone" placeholder="Telefone (55...)"><br><br>
    <input id="email" placeholder="Email"><br><br>
    <input id="senha" type="password" placeholder="Senha"><br><br>
    <button onclick="registrar()">Cadastrar</button>
  </div>
</div>

<script type="module">
import { auth, db } from "./firebase.js";
import { createUserWithEmailAndPassword } from
"https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";
import { doc, setDoc } from
"https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

async function registrar() {
  const cred = await createUserWithEmailAndPassword(
    auth,
    email.value,
    senha.value
  );

  await setDoc(doc(db, "users", cred.user.uid), {
    nome: nome.value,
    nomePublico: nomePublico.value,
    telefone: telefone.value,
    email: email.value,
    role: "user",
    criadoEm: Date.now()
  });

  location.href = "assinaturas.html";
}
</script>

</body>
</html>